<!-- Payments Dashboard -->
<div class="page-container">
  <div class="content-wrapper">
    <div class="payments-dashboard-wrapper">
      <div class="payments-dashboard-container">
    <div class="page-header">
      <div>
        <h1>Payments & Transactions</h1>
        <p class="page-subtitle">Manage your loan payments and bank accounts</p>
      </div>
      <button class="btn-primary" id="makePaymentBtn">
        <i class="fas fa-credit-card"></i>
        Make Payment
      </button>
    </div>

    <!-- Overview Cards -->
  <div class="overview-cards">
    <div class="metric-card">
      <div class="metric-icon outstanding">
        <i class="fas fa-wallet"></i>
      </div>
      <div class="metric-content">
        <span class="metric-label">Total Outstanding</span>
        <span class="metric-value" id="totalOutstanding">R 0.00</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon next-payment">
        <i class="fas fa-calendar-check"></i>
      </div>
      <div class="metric-content">
        <span class="metric-label">Next Payment</span>
        <span class="metric-value" id="nextPaymentAmount">R 0.00</span>
        <span class="metric-subtext" id="nextPaymentDate">--</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon paid-month">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="metric-content">
        <span class="metric-label">Paid This Month</span>
        <span class="metric-value" id="paidThisMonth">R 0.00</span>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon total-paid">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="metric-content">
        <span class="metric-label">Total Paid</span>
        <span class="metric-value" id="totalPaid">R 0.00</span>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="payments-grid">
    <!-- Active Loans Section -->
    <div class="section-card active-loans-section">
      <div class="section-header">
        <h2><i class="fas fa-file-invoice-dollar"></i> Active Loans</h2>
        <span class="badge" id="activeLoansCount">0</span>
      </div>
      <div class="section-body">
        <div id="activeLoansContainer" class="loans-list">
          <div class="empty-state">
            <i class="fas fa-inbox"></i>
            <p>No active loans</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bank Accounts Section -->
    <div class="section-card bank-accounts-section">
      <div class="section-header">
        <h2><i class="fas fa-university"></i> Bank Accounts</h2>
        <button class="btn-secondary btn-sm" id="addBankAccountBtn">
          <i class="fas fa-plus"></i>
          Add Account
        </button>
      </div>
      <div class="section-body">
        <div id="bankAccountsContainer" class="bank-accounts-list">
          <div class="empty-state">
            <i class="fas fa-building-columns"></i>
            <p>No saved bank accounts</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Payment History Section -->
  <div class="section-card payment-history-section">
    <div class="section-header">
      <h2><i class="fas fa-history"></i> Payment History</h2>
      <div class="header-actions">
        <button class="btn-secondary btn-sm" id="downloadStatementBtn">
          <i class="fas fa-download"></i>
          Download
        </button>
        <select class="filter-select" id="paymentHistoryFilter">
          <option value="all">All Payments</option>
          <option value="30">Last 30 Days</option>
          <option value="90">Last 90 Days</option>
          <option value="365">Last Year</option>
        </select>
      </div>
    </div>
    <div class="section-body">
      <div class="table-container">
        <table class="payments-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Loan Reference</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Method</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="paymentHistoryBody">
            <tr class="empty-row">
              <td colspan="6">
                <div class="empty-state">
                  <i class="fas fa-receipt"></i>
                  <p>No payment history yet</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Loan Details Module Container -->
<div id="module-container" class="module-overlay hidden">
  <div class="module-content-wrapper">
    <button class="module-close-btn" onclick="closeLoanDetailsModal()">
      <i class="fas fa-times"></i>
    </button>
    <div id="module-content" class="loan-details-modal-content">
      <!-- Loan details will be loaded here -->
    </div>
  </div>
</div>

<!-- Payment Modal -->
<div id="paymentModal" class="modal-overlay hidden">
  <div class="modal-content payment-modal">
    <button class="close-btn" id="closePaymentModal">
      <i class="fas fa-times"></i>
    </button>
    
    <div class="modal-header">
      <h2><i class="fas fa-credit-card"></i> Make a Payment</h2>
      <p>Choose a loan and enter the payment amount</p>
    </div>

    <div class="modal-body">
      <form id="paymentForm">
        <div class="form-group">
          <label>Select Loan</label>
          <select id="paymentLoanSelect" required>
            <option value="">-- Select a loan --</option>
          </select>
        </div>

        <div id="selectedLoanDetails" class="loan-details-card hidden">
          <!-- Will be populated dynamically -->
        </div>

        <div class="form-group">
          <label>Payment Amount</label>
          <div class="input-with-prefix">
            <span class="prefix">R</span>
            <input type="number" id="paymentAmount" step="0.01" min="0" placeholder="0.00" required>
          </div>
          <div class="amount-suggestions">
            <button type="button" class="amount-btn" data-type="minimum">Minimum Payment</button>
            <button type="button" class="amount-btn" data-type="full">Full Amount</button>
          </div>
        </div>

        <div class="form-group">
          <label>Payment Method</label>
          <div class="payment-methods">
            <label class="payment-method-option">
              <input type="radio" name="paymentMethod" value="card" checked>
              <div class="method-card">
                <i class="fas fa-credit-card"></i>
                <span>Card Payment</span>
                <small>Via Paystack</small>
              </div>
            </label>
            <label class="payment-method-option">
              <input type="radio" name="paymentMethod" value="bank">
              <div class="method-card">
                <i class="fas fa-university"></i>
                <span>Bank Transfer</span>
                <small>Manual transfer</small>
              </div>
            </label>
          </div>
        </div>

        <div id="paymentStatus" class="status-message hidden"></div>

        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancelPaymentBtn">Cancel</button>
          <button type="submit" class="btn-primary" id="submitPaymentBtn">
            <span>Continue to Payment</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
      </div>
    </div>
  </div>
</div>
